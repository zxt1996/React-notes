# Redux基础
Redux是JavaScript状态容器，提供可预测化的状态管理。  
![](img/redux.png)  
## store
store是redux应用的唯一数据源，调用createStore API创建store。  
```
import { createStore } from 'redux';
const store = createStore(fn);
```
Store具有以下职责：
- 维持应用的state
- 提供getState()方法获取state
- 提供dispatch(action)方法更新state
- 通过subscribe(listener)注册监听器
- 通过subscribe(listener)返回的函数注销监听器
  
**Redux 应用只有一个单一的store**。当需要拆分数据处理逻辑时，应该使用reducer组合而不是创建多个store。
### store.getState()
Store对象包含所有数据，如果想要得到某个时点的数据，需要对Store生成快照，这种时点的数据集合，叫做State。
```
import {createStore} from 'redux';
const store = createStore(fn);

const state = store.getState();
```
### store.dispatch()
store.dispatch接受一个Action对象作为参数，将它发送出去，这个是View发出Action的唯一方法。
```
import {createStore} from 'redux';
const store = createStore(fn);

store.dispatch({
    type:'ADD_TODO',
    payload:'Learn Redux'
});
```
### store.subscribe()
使用store.subscribe方法设置监听函数，一旦State发生变化，就自动执行函数。
```
import {createStore} from 'redux';
const store = createStore(reducer);

store.subscribe(listener);
```
store.subscribe方法返回一个函数，调用这个函数就可以解除监听。
```
let unsubscribe = store.subscribe(()=>
  console.log(store.getState)
);

unsubscribe();
```
## action
action是修改store的唯一途径，通过store.dispath()将action传到store  
本质上就是一个普通js对象。action内必须使用一个字符串类型的type字段来表示将要执行的动作。
```
  const action = {
      type:ADD_TODO,
      payload:'Learn Redux'
  }
```
以上的代码中，Action的名称是ADD_TODO,它携带的信息是字符串Learn Redux。
### Action Creator
View要发送多少种消息，就会有多少种Action。可以定义一个函数来生成Action,这个函数就叫做Action Creator
```
const ADD_TODO = '添加TODO';

function addTodo(text){
    return {
        type:ADD_TODO,
        text
    }
}

const action = addTodo('Learn Redux');
```
上面代码中，addTodo函数就是一个Action Creator