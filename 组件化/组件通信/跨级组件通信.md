# 跨级组件通信
- 层层组件传递props

例如A组件和B组件之间要进行通信,先找到A和B公共的父组件,A先向C组件通信,C组件通过props和B组件通信,此时C组件起的就是中间件的作用

```
//container
class Container extends Component{
    constructor(){
        super();
        this.state = {
            value:'',
        }
    }

    setValue = value => {
        this.setState({
            value,
        })
    }

    render(){
        return (
            <div>
              <A setValue={this.setValue}/>
              <B value={this.state.value}/>
            </div>
        );
    }
}
```

```
//兄弟A
class A extends Component{
    handleChange = (e) => {
        this.value = e.target.value;
    }

    handleClick = () => {
        const {setValue} = this.props;
        setValue(this.value);
    }

    render(){
        return (
            <div className="card">
            我是Brother A,<input onChange={this.handleChange}/>
            <div className="button" onClick={this.handleClick}>通知</div>
        </div>
        )
    }
}
```

```
//兄弟B
const B = props => (
    <div className="card">
      我是Brother B,value是：{props.value}
    </div>
);
export default B;
```
组件 A 中的表单 value 值，告知了父级 Container 组件（通过 setValue 函数改变 state），组件 B 依赖于 Container 传下来的 state，会做出同步更新。这里的中间者是 Container。
- 使用context

context是一个全局变量,像是一个大容器,在任何地方都可以访问到,我们可以把要通信的信息放在context上,然后在其他组件中可以随意取到;
但是React官方不建议使用大量context,尽管他可以减少逐层传递,但是当组件结构复杂的时候,我们并不知道context是从哪里传过来的;而且context是一个全局变量,全局变量正是导致应用走向混乱的罪魁祸首.
```

```